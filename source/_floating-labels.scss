/*
BootSome is licensed under the Apache License 2.0 license
https://github.com/TRP-Solutions/boot-some/blob/master/LICENSE
*/

$form-floating-required-top: max(0px, min($form-floating-padding-y, $form-floating-padding-x)) !default;
$form-floating-required-right: max(0px, min($form-floating-padding-y, $form-floating-padding-x)) !default;

.form-floating .form-control .form-check-input {
	margin-top: calc(($form-floating-line-height - 1) / 2 * 1em);
}
.form-floating .form-control .form-check:not(:last-child) {
	margin-right: $spacer;
}

.form-floating .form-control.bootsome-checkbox {
	padding-top: calc(($form-floating-input-padding-t + $form-floating-input-padding-b)/2);
	padding-bottom: calc(($form-floating-input-padding-t + $form-floating-input-padding-b)/2);
}
.form-floating .form-control.bootsome-disabled {
	// copy-pasted from .form-control:disabled in bootstrap-5.3.0/scss/forms/_form-control.scss
	color: $input-disabled-color;
	background-color: $input-disabled-bg;
	border-color: $input-disabled-border-color;
	// iOS fix for unreadable disabled content; see https://github.com/twbs/bootstrap/issues/11655.
	opacity: 1;

	~ label {
		// copy-pasted from .form-floating > :disabled ~ label in bootstrap-5.3.0/scss/forms/_floating-labels.scss
		color: $form-floating-label-disabled-color;

		&::after {
			background-color: $input-disabled-bg;
		}
	}
}

.form-floating .form-control.bootsome-radio {
	display: flex;
	flex-wrap: wrap;
	height: auto;
	gap: $spacer;

	.form-check {
		min-height: $form-floating-line-height * 1rem;
		margin-right: 0rem;
		margin-bottom: 0rem;
	}
}

.form-floating {
	.bootsome-required {
		position: absolute;
		top: $form-floating-required-top;
		right: $form-floating-required-right;
		z-index: 2;
		pointer-events: none;

		color: $secondary;
		background-color: RGBA(var(--#{$prefix}secondary-bg-rgb), var(--#{$prefix}bg-opacity, 1));
	}

	select:invalid,
	textarea:invalid,
	input:invalid {
		~ .bootsome-required {
			color: color-contrast($warning);
			background-color: RGBA(var(--#{$prefix}warning-rgb), var(--#{$prefix}bg-opacity, 1));
		}
	}

	.bootsome-radio:has(input:invalid),
	.bootsome-checkbox:has(input:invalid),
	.bootsome-token-container:not(:has(button)) {
		~ .bootsome-required {
			color: color-contrast($warning);
			background-color: RGBA(var(--#{$prefix}warning-rgb), var(--#{$prefix}bg-opacity, 1));
		}
	}

	select,
	input[type=number] {
		~ .bootsome-required {
			right: calc($form-floating-required-right + $form-select-indicator-padding);
		}
	}
}
